<%-include('../../partials/header.ejs');%>
<%-include('../../partials/navbar.ejs');%>

<div class="container">

    <hr>
    <h2>Categorias</h2>
    <a href="/admin/categories/new"><button class="btn btn-success">Criar nova categoria</button></a>
    
    <hr>

    <table class="table table-bordered" >

      <thead>
        <tr>
          <th>ID</th>
          <th>title</th>
          <th>slug</th>
          <th>ações</th>
        </tr>
        </thead>
        <tbody>
        <%categories.forEach(category=>{ %>
         
              <tr>
                <th><%=category.id%></th>
                <th><%=category.title%></th>
                <th><%=category.slug%></th>
                <th>
                <a href="/admin/categories/edit/<%= category.id%>" class="btn btn-warning" href="">Editar </a>

                <form method="POST" action="/categories/delete" style="display: inline;" onsubmit="confirmarDelecao(event,this)">
                  <input type="hidden" name="id" value="<%= category.id %>"> 
                <button class="btn btn-danger ">Excluir</button>
                </form>
              </th>


              </tr>
           

          <%})%>
        </tbody>
      </thead>
      
    </table>

</div>




<%-include('../../partials/footer.ejs');%>


<script>
  function confirmarDelecao(event,form){
    event.preventDefault();
    var decision = confirm("Deseja realmente excluir a categoria ?");
    if (decision){
      form.submit();

    }
    else{
      console.log("it was an accident");
    }

  }
</script>